<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Command Center | LIS</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@300;400;600&display=swap');

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: #f0f2f5;
            display: flex;
        }

        /* Sidebar - Faculty Theme (Deep Maroon & Gold) */
        .sidebar {
            width: 260px;
            height: 100vh;
            background: #4a0404; 
            color: white;
            padding: 25px;
            position: fixed;
            border-right: 4px solid #D4AF37;
        }

        .sidebar h2 {
            font-family: 'Cinzel', serif;
            color: #D4AF37;
            text-align: center;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 15px;
        }

        .nav-link {
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 10px;
            transition: 0.3s;
            display: block;
            color: #eee;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .nav-link:hover, .nav-link.active {
            background: #D4AF37;
            color: #4a0404;
            font-weight: bold;
        }

        /* Main Content Area */
        .main-area {
            margin-left: 310px;
            padding: 40px;
            width: calc(100% - 350px);
        }

        .faculty-header {
            background: white;
            padding: 20px 40px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            border-left: 8px solid #4a0404;
        }

        .faculty-header h1 { font-family: 'Cinzel'; font-size: 1.5rem; color: #4a0404; margin: 0; }

        /* Action Cards */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .action-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            text-align: center;
            border-bottom: 4px solid #D4AF37;
            transition: 0.3s;
        }

        .action-card:hover { transform: translateY(-5px); }
        .action-card h3 { color: #555; font-size: 1rem; margin-bottom: 10px; }
        
        .action-btn {
            background: #4a0404;
            color: #D4AF37;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            font-size: 0.8rem;
        }

        /* Report Generator Highlight Card */
        .report-highlight {
            background: linear-gradient(45deg, #4a0404, #800000);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #D4AF37;
        }

        .report-highlight h2 { font-family: 'Cinzel'; color: #D4AF37; margin: 0; }

        .gen-btn {
            background: #D4AF37;
            color: #4a0404;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        .logout-btn {
            background: #000;
            color: #D4AF37;
            padding: 10px 25px;
            border: 2px solid #D4AF37;
            border-radius: 30px;
            cursor: pointer;
            transition: 0.3s;
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Faculty Portal</h2>
        <nav style="margin-top: 30px;">
            <a href="#" class="nav-link active">Dashboard Home</a>
            <a href="#" class="nav-link">Class Attendance</a>
            <a href="report-card.html" class="nav-link">Report Card Generator</a>
            <a href="#" class="nav-link">Exam Marks Entry</a>
            <a href="#" class="nav-link">Student Database</a>
            <a href="#" class="nav-link">Leave Management</a>
        </nav>
    </div>

    <div class="main-area">
        <div class="faculty-header">
            <h1>Imperial Command Center</h1>
            <button class="logout-btn" onclick="window.location.href='login.html'">Logout</button>
        </div>

        <div class="report-highlight">
            <div>
                <h2>Exam Results Out!</h2>
                <p>Generate & download official student report cards in PDF format.</p>
            </div>
            <a href="report-card.html" class="gen-btn">Start Generating</a>
        </div>

        <div class="action-grid">
            <div class="action-card">
                <h3>Students</h3>
                <p style="font-size: 1.5rem; color: #4a0404; font-weight: bold;">1,240</p>
                <a href="#" class="action-btn">View List</a>
            </div>
            <div class="action-card">
                <h3>Today's Attendance</h3>
                <p style="font-size: 1.5rem; color: #046307; font-weight: bold;">Marked</p>
                <a href="#" class="action-btn">Update</a>
            </div>
            <div class="action-card">
                <h3>Assignments</h3>
                <p style="font-size: 1.5rem; color: #9b111e; font-weight: bold;">12 Pending</p>
                <a href="#" class="action-btn">Check</a>
            </div>
        </div>

        <div style="margin-top: 30px; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
            <h3 style="color: #4a0404; font-family: 'Cinzel'; border-bottom: 2px solid #f0f2f5; padding-bottom: 10px;">Recent Activity</h3>
            <p>• Grade XII-A result processing started.</p>
            <p>• New circular issued for Royal Annual Sports Meet.</p>
            <p>• Faculty meeting scheduled at 3:00 PM in the Imperial Hall.</p>
        </div>
    </div>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Dual-Term Report | LIS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Cinzel:wght@700&display=swap');

        body { font-family: 'Poppins', sans-serif; background: #eef2f3; padding: 20px; color: #333; }
        .form-wrap { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); border-top: 10px solid #4a0404; }
        
        h2 { font-family: 'Cinzel'; color: #4a0404; text-align: center; text-decoration: underline; }
        .section-title { background: #4a0404; color: #D4AF37; padding: 12px; margin: 25px 0 15px; font-size: 15px; text-transform: uppercase; font-weight: bold; border-radius: 5px; }
        
        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        .input-box { display: flex; flex-direction: column; }
        label { font-size: 12px; font-weight: 700; margin-bottom: 5px; color: #4a0404; }
        input { padding: 10px; border: 1px solid #aaa; border-radius: 6px; font-size: 14px; }

        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 11px; }
        th, td { border: 1px solid #4a0404; padding: 6px; text-align: center; }
        th { background: #f2e6d9; color: #4a0404; font-weight: bold; }
        .sub-col { text-align: left; font-weight: bold; width: 140px; background: #fffcf5; }

        .btn-container { text-align: center; margin-top: 50px; }
        .btn-download { background: #4a0404; color: #D4AF37; padding: 18px 60px; border: 2px solid #D4AF37; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 18px; transition: 0.4s; }
        .btn-download:hover { background: #D4AF37; color: #4a0404; box-shadow: 0 5px 20px rgba(212,175,55,0.5); }

        /* --- PDF PRINT LAYOUT --- */
        #printable-report { 
            width: 1000px; padding: 50px; background: white; border: 15px double #4a0404; 
            position: absolute; left: -9999px; font-family: 'Poppins', sans-serif;
        }
        .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-35deg); opacity: 0.07; width: 500px; z-index: 0; }
        .report-inner { position: relative; z-index: 1; }
        .header-main { display: flex; align-items: center; justify-content: space-between; border-bottom: 4px solid #4a0404; padding-bottom: 20px; margin-bottom: 20px; }
        .header-main h1 { font-family: 'Cinzel'; font-size: 32px; color: #4a0404; margin: 0; }
        .stu-img { width: 110px; height: 130px; border: 3px solid #4a0404; background: #eee; object-fit: cover; }
    </style>
</head>
<body>

<div class="form-wrap">
    <h2><img src="logo.png" width="50" style="vertical-align: middle;"> Dual-Term Academic Record</h2>
    
    <div class="section-title">1. Student Profile</div>
    <div class="grid-inputs">
        <div class="input-box"><label>Student Name</label><input type="text" id="s_name"></div>
        <div class="input-box"><label>Roll No.</label><input type="text" id="roll_no"></div>
        <div class="input-box"><label>Class/Section</label><input type="text" id="class_sec"></div>
        <div class="input-box"><label>Date of Birth</label><input type="date" id="dob"></div>
        <div class="input-box"><label>Attendance (%)</label><input type="text" id="attendance"></div>
        <div class="input-box"><label>Student Photo</label><input type="file" id="photo_input" accept="image/*"></div>
    </div>

    <div class="section-title">2. Scholastic Marks (Term-1 & Term-2)</div>
    <table id="main-entry-table">
        <thead>
            <tr>
                <th rowspan="2">Subjects</th>
                <th colspan="4">Term - 1 (100)</th>
                <th colspan="4">Term - 2 (100)</th>
            </tr>
            <tr>
                <th>PT(10)</th><th>NB(5)</th><th>SEA(5)</th><th>Exam(80)</th>
                <th>PT(10)</th><th>NB(5)</th><th>SEA(5)</th><th>Exam(80)</th>
            </tr>
        </thead>
        <tbody>
            <script>
                const subjects = ["Language 1", "Language 2", "Mathematics", "Science", "Social Science", "Computer"];
                subjects.forEach((s) => {
                    document.write(`
                        <tr>
                            <td class="sub-col">${s}</td>
                            <td><input type="number" class="t1_pt" value="0"></td>
                            <td><input type="number" class="t1_nb" value="0"></td>
                            <td><input type="number" class="t1_sea" value="0"></td>
                            <td><input type="number" class="t1_ex" value="0"></td>
                            <td><input type="number" class="t2_pt" value="0"></td>
                            <td><input type="number" class="t2_nb" value="0"></td>
                            <td><input type="number" class="t2_sea" value="0"></td>
                            <td><input type="number" class="t2_ex" value="0"></td>
                        </tr>
                    `);
                });
            </script>
        </tbody>
    </table>

    <div class="section-title">3. Co-Scholastic & Teacher Remarks</div>
    <div class="grid-inputs">
        <div class="input-box"><label>Work Education (Grade)</label><input type="text" id="work_ed"></div>
        <div class="input-box"><label>Art Education (Grade)</label><input type="text" id="art_ed"></div>
        <div class="input-box"><label>Health & PE (Grade)</label><input type="text" id="health_pe"></div>
        <div class="input-box" style="grid-column: span 2;"><label>Teacher's Remarks</label><input type="text" id="remarks"></div>
    </div>

    <div class="btn-container">
        <button class="btn-download" onclick="generatePDF()">Generate Final PDF Report</button>
    </div>
</div>

<div id="printable-report">
    <img src="logo.png" class="watermark">
    <div class="report-inner">
        <div class="header-main">
            <img src="logo.png" width="100">
            <div style="text-align: center;">
                <h1>THE LALIT INTERNATIONAL SCHOOL</h1>
                <p>Imperial Knowledge • Global Vision</p>
                <p><strong>REPORT CARD: SESSION 2026-27</strong></p>
            </div>
            <img id="pdf_photo" class="stu-img" src="">
        </div>

        <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 16px;">
            <div>
                <p><strong>Name:</strong> <span id="r_name"></span></p>
                <p><strong>Roll No:</strong> <span id="r_roll"></span></p>
                <p><strong>DOB:</strong> <span id="r_dob"></span></p>
            </div>
            <div style="text-align: right;">
                <p><strong>Class:</strong> <span id="r_class"></span></p>
                <p><strong>Attendance:</strong> <span id="r_att"></span></p>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th rowspan="2">SCHOLASTIC AREAS</th>
                    <th colspan="2">TERM - 1</th>
                    <th colspan="2">TERM - 2</th>
                    <th rowspan="2">GRAND<br>TOTAL</th>
                    <th rowspan="2">GRADE</th>
                </tr>
                <tr>
                    <th>TOTAL (100)</th><th>GRADE</th>
                    <th>TOTAL (100)</th><th>GRADE</th>
                </tr>
            </thead>
            <tbody id="pdf-rows"></tbody>
        </table>

        <div style="display: flex; gap: 20px; margin-top: 20px;">
            <table style="width: 50%;">
                <tr><th colspan="2">CO-SCHOLASTIC AREAS</th></tr>
                <tr><td>Work Education</td><td id="r_work"></td></tr>
                <tr><td>Art Education</td><td id="r_art"></td></tr>
                <tr><td>Health & PE</td><td id="r_health"></td></tr>
            </table>
            <div style="width: 50%; border: 2px solid #4a0404; padding: 10px;">
                <strong>Teacher's Remarks:</strong> <br> <span id="r_remarks"></span>
            </div>
        </div>

        <div style="margin-top: 60px; display: flex; justify-content: space-between; text-align: center;">
            <div><br>___________________<br>Class Teacher</div>
            <div><br>___________________<br>Principal Signature</div>
        </div>
    </div>
</div>

<script>
    function getGrade(m) {
        if(m >= 91) return "A1"; if(m >= 81) return "A2"; if(m >= 71) return "B1";
        if(m >= 61) return "B2"; if(m >= 51) return "C1"; if(m >= 41) return "C2";
        if(m >= 33) return "D"; return "E";
    }

    // Photo Preview
    document.getElementById('photo_input').onchange = (e) => {
        let reader = new FileReader();
        reader.onload = () => document.getElementById('pdf_photo').src = reader.result;
        reader.readAsDataURL(e.target.files[0]);
    };

    async function generatePDF() {
        const { jsPDF } = window.jspdf;
        
        // Map Info
        document.getElementById('r_name').innerText = document.getElementById('s_name').value;
        document.getElementById('r_roll').innerText = document.getElementById('roll_no').value;
        document.getElementById('r_class').innerText = document.getElementById('class_sec').value;
        document.getElementById('r_dob').innerText = document.getElementById('dob').value;
        document.getElementById('r_att').innerText = document.getElementById('attendance').value + "%";
        document.getElementById('r_work').innerText = document.getElementById('work_ed').value;
        document.getElementById('r_art').innerText = document.getElementById('art_ed').value;
        document.getElementById('r_health').innerText = document.getElementById('health_pe').value;
        document.getElementById('r_remarks').innerText = document.getElementById('remarks').value;

        // Process Marks
        const pdfRows = document.getElementById('pdf-rows');
        pdfRows.innerHTML = "";
        const entryRows = document.querySelectorAll('#main-entry-table tbody tr');

        entryRows.forEach((row, i) => {
            const t1 = (parseFloat(row.querySelector('.t1_pt').value)||0) + (parseFloat(row.querySelector('.t1_nb').value)||0) + (parseFloat(row.querySelector('.t1_sea').value)||0) + (parseFloat(row.querySelector('.t1_ex').value)||0);
            const t2 = (parseFloat(row.querySelector('.t2_pt').value)||0) + (parseFloat(row.querySelector('.t2_nb').value)||0) + (parseFloat(row.querySelector('.t2_sea').value)||0) + (parseFloat(row.querySelector('.t2_ex').value)||0);
            const grand = (t1 + t2) / 2; // Average for final grade or t1+t2 based on preference. Here it's grand average.

            pdfRows.innerHTML += `
                <tr>
                    <td style="text-align:left; font-weight:bold;">${subjects[i]}</td>
                    <td>${t1}</td><td>${getGrade(t1)}</td>
                    <td>${t2}</td><td>${getGrade(t2)}</td>
                    <td style="background:#f9f9f9; font-weight:bold;">${t1+t2}</td>
                    <td style="background:#f9f9f9; font-weight:bold;">${getGrade(grand)}</td>
                </tr>
            `;
        });

        // Capture PDF
        const report = document.getElementById('printable-report');
        report.style.position = "static";
        const canvas = await html2canvas(report, { scale: 2, useCORS: true });
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF('p', 'mm', 'a4');
        pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
        pdf.save(`${document.getElementById('s_name').value}_Final_Report.pdf`);
        report.style.position = "absolute";
    }
</script>

</body>
</html>

